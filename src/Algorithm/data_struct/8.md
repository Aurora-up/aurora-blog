---
title: b 树、b+ 树
category: 
  - 数据结构
tag: 
  - b 树
  - 树
prev: ./7
next: ./9

---

「b Tree」

<!-- more -->

## b树的基本概念

「b Tree 」又称「多路平衡查找树」，b Tree 中所有结点的子结点个数的最大值称为 b Tree的阶，通常使用 $m$ 来表示，一颗 $m$ 阶 b Tree或为**空树**，或为满足下列条件的 $m$ 叉树：

1. 树中每个结点**至多**有 $m$ 颗子树，即**至多**包含 $m-1$ 个关键字；
2. 对于任意结点，其所有子树高度都相同；【保证 b Tree 的平衡，防止其退化为左偏树或者右偏树，即防止层数过多】
3. 若根结点不是终端结点，则至少有两颗子树；
4. 除根结点外的所有非叶结点至少有 $⌈\frac{m}{2}⌉$ 颗子树，即至少含有 $⌈\frac{m}{2}⌉-1$ 个关键字；【防止 b Tree 退化为二叉树，使得层数过多，效率降低】
5. 所有的叶结点都出现在同一层次上，并且**不带信息** (可视为外部结点或者类似于折半查找判定树的查找失败结点，实际这些结点并不存在，**指向这些结点的指针为空**)

例如下图为一颗 $5$ 阶 b Tree .

![B树](./image/image-20230110121421600-1673752540636-1.png)

:::warning 

计算高度时并不包含 “叶子结点” ，即不带信息的结点不会被计算到高度中。

:::

含有 $n$ 个关键字的 $m$ 阶 b Tree ，最小高度，最大高度是多少？
$$
log_m(n+1)≤h≤log_{⌈\frac{m}{2}⌉} \frac{n+1}{2} + 1
$$


- **最小高度**——让每个结点尽可能的满，即每个结点有 $m-1$ 个关键字，$m$ 个分叉，则有 $n≤(m-1)(1+m+...+m^{h-1}=m^h-1$ .

也即 :
$$
h≥log_m(n+1)
$$
所以【最小高度为 $log_m(n+1)$ 】.



- **最大高度**——让各层的分叉尽可能的少，即根结点只有 $2$ 个分叉，其他结点只有 $⌈\frac{m}{2}⌉$ 个分叉，各层结点至少有：第一层 $1$ 个、第二层 $2$ 个、第三层 $2⌈\frac{m}{2}⌉$ 个 … 第 $h$ 层 $2(⌈\frac{m}{2}⌉)^{h-2}$ ，第 $h+1$ 层共有 “叶子结点” $2(⌈\frac{m}{2}⌉)^{h-1}$ 个 .

**$n$ 个关键字的 b Tree 必有 $n+1$ 个叶子结点**，则 $n+1 ≥ 2(⌈\frac{m}{2}⌉)^{h-1}$ ，即：
$$
h≤log_{⌈\frac{m}{2}⌉} \frac{n+1}{2} + 1
$$
所有【最大高度为 $log_{⌈\frac{m}{2}⌉} \frac{n+1}{2} + 1$】.



---
title : springboot æ•´å’Œ Swagger
tag: 
  - Swagger
category:
  - springboot
prex: ./1
---

springboot æ•´å’Œ Swagger

<!-- more -->

![image-20221126151324513](./image/image-20221126151324513.png)

ã€[Swagger å®˜ç½‘](https://swagger.io/)ã€‘

å…¶æ˜¯ä¸€ä¸ªä½¿ç”¨æ–‡æ¡£å¿«é€Ÿç”Ÿæˆ API æ¥å£æ–‡æ¡£çš„å·¥å…·ï¼Œæ—¢å¯ä»¥ä½¿ç”¨ [Swagger Editor](https://editor.swagger.io/) å»ç”Ÿæˆ API æ¥å£æ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åœ¨å„ç§è¯­è¨€æˆ–è€…æ¡†æ¶ä¸­å¯¹ Swagger çš„é›†æˆã€‚



[SwaggerHub](https://app.swaggerhub.com)  å¯ä»¥åœ¨çº¿ç¼–å†™ API æ–‡æ¡£ï¼Œå¹¶ä¸”å¯ä»¥ç”Ÿæˆä¸åŒè¯­è¨€çš„çš„ç‰ˆæœ¬. 

![image-20221126155118210](./image/image-20221126155118210.png)



[Springfox](http://springfox.github.io/springfox/) æ˜¯åœ¨ Spring ä¸­çš„å¯¹ Swagger çš„é›†æˆ. Swagger åŒæ—¶è¿˜æ”¯æŒè‡ªå®šä¹‰ UI ç•Œé¢. [Knife4j](https://doc.xiaominfo.com/) æ˜¯ä¸€ä¸ªå¼€æºçš„ Swagger UI



>  ğŸš€ å®ä¾‹ï¼šåœ¨ Springboot é¡¹ç›®ä¸­ä½¿ç”¨ Springfox å’Œ Knife4j ç”Ÿæˆ OpenAPI3 è§„èŒƒçš„ API æ¥å£æ–‡æ¡£ã€‚

å¯¼å…¥ç›¸å…³ä¾èµ–:

:::tabs 

@tab Springfox 

[Maven Repository: io.springfox Â» springfox-boot-starter (mvnrepository.com)](https://mvnrepository.com/artifact/io.springfox/springfox-boot-starter)

```xml
<dependency>
  <groupId>io.springfox</groupId>
  <artifactId>springfox-boot-starter</artifactId>
  <version>3.0.0</version>
</dependency>
```

@tab Knife4j

[Maven Repository: com.github.xiaoymin Â» knife4j-springdoc-ui (mvnrepository.com)](https://mvnrepository.com/artifact/com.github.xiaoymin/knife4j-springdoc-ui)

```xml
<dependency>
  <groupId>com.github.xiaoymin</groupId>
  <artifactId>knife4j-springdoc-ui</artifactId>
  <version>3.0.3</version>
</dependency>
```

:::

é…ç½®ç›¸å…³ï¼š

:::tabs

@tab java é…ç½®ç±»

```java
@Configuration
@EnableOpenApi
public class SwaggerConfig {

  @Value("${knife4j.enable}")
  private Boolean swaggerEnabled;

  @Bean
  public Docket createRestApi(){
    return new Docket(DocumentationType.OAS_30)
            .apiInfo(apiInfo())
            // æ˜¯å¦å¼€å¯
            .enable(swaggerEnabled)
            .select()
            // æ‰«æçš„è·¯å¾„ä½¿ç”¨ @Api çš„ controller
            .apis(RequestHandlerSelectors.withMethodAnnotation(ApiOperation.class))
            // æŒ‡å®šè·¯å¾„å¤„ç†, PathSelectors.any() ä»£è¡¨æ‰€æœ‰çš„è·¯å¾„
            .paths(PathSelectors.any())
            .build();
  }
  public ApiInfo apiInfo() {
    return new ApiInfoBuilder()
            .title("webApi")
            .description("æµ‹è¯•webAPI")
            //ä½œè€…ä¿¡æ¯
            .contact(new Contact("HDD", "https://aurora-up.gitee.io/aurora-blog/", "2723787996@qq.com"))
            .version("1.0.0")
            .build();
  }
}
```

@tab yaml é…ç½®æ–‡ä»¶

```yaml
spring:
	mvc:
		pathmatch:
			# é…ç½®ç­–ç•¥
      matching-strategy: ant-path-matcher
      
 knife4j:
  enable: true
```

:::

:::info

é…ç½®æ–‡ä»¶ä¸­ä¸»è¦ä½¿ç”¨çš„ä¸¤ä¸ª APIï¼š

- [Docket](http://springfox.github.io/springfox/javadoc/current/springfox/documentation/spring/web/plugins/Docket.html)

- [ApiSelectorBuilder](http://springfox.github.io/springfox/javadoc/current/springfox/documentation/spring/web/plugins/ApiSelectorBuilder.html)

å¯ä»¥é€šè¿‡å…¶ä¸­çš„æ–¹æ³•è¿›è¡Œæ›´å¤šçš„é…ç½®.

:::



ä½¿ç”¨ç›¸å…³ï¼š

:::tabs

@tab Controller 

```java {3,16}
@RestController
@RequestMapping("/user")
@Api(tags = "UserControlleræ¥å£")
public class UserHandler {

  private final UserMapper userMapper;

  public UserHandler(@Autowired UserMapper userMapper) {
    this.userMapper = userMapper;
  }

  /**
   * @return è¿”å›æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯
   */
  @GetMapping("/all-users")
  @ApiOperation(value = "æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·")
  public ResponseEntity<Flux<List<User>>> getAllUsers() {
    List<User> allUser = userMapper.getAllUser();
    return ResponseEntity.ok()
            .contentType(MediaType.valueOf(MediaType.APPLICATION_JSON_VALUE))
            .body(Flux.just(allUser));
  }
}
```

@tab Entity

```java {5,14,20,26,32,38,44}
@Data
@EqualsAndHashCode(callSuper = false)
@Builder
@TableName("user")
@ApiModel(value = "UserEntityå¯¹è±¡", description = "ç”¨æˆ·è¡¨")
public class User implements Serializable {

  private static final long serialVersionUID = 1L;

  /**
   * ä¸»é”®ID
   */
  @TableId(value = "id", type = IdType.AUTO)
  @ApiModelProperty(value = "id")
  private String id;

  /**
   * ç”¨æˆ·åç§°
   */
  @ApiModelProperty(value = "å§“å")
  private String name;

  /**
   * ç”¨æˆ·å¹´é¾„
   */
  @ApiModelProperty(value = "å¹´é¾„")
  private Integer age;

  /**
   * ç”¨æˆ·æ€§åˆ«
   */
  @ApiModelProperty(value = "æ€§åˆ«")
  private String gender;

  /**
   * ç”¨æˆ·å¯†ç 
   */
  @ApiModelProperty(value = "å¯†ç ")
  private String password;

  /**
   * ç”¨æˆ·é‚®ç®±
   */
  @ApiModelProperty(value = "é‚®ç®±")
  private String email;
}
```

:::

æ•ˆæœå¦‚ä¸‹: 

![image-20221126165547977](./image/image-20221126165547977.png)

![image-20221126165634719](./image/image-20221126165634719.png)





















